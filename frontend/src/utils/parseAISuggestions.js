export function parseAISuggestions(raw){ if(!raw) return {roles:[],radar:[],bars:[],raw}; if(typeof raw==='object') return raw; let s=raw.trim(); s=s.replace(/```json|```/g,'').trim(); const first=s.indexOf('{'), last=s.lastIndexOf('}'); const candidate = first!==-1 && last!==-1 ? s.slice(first,last+1) : s; try{ return JSON.parse(candidate); }catch(e){ return {roles:[],radar:[],bars:[],raw}; } }